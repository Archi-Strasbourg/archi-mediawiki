{
  "name": "archi-strasbourg/archi-mediawiki",
  "description": "Port of Archi-Wiki to MediaWiki",
  "license": "GPL-3.0-only",
  "type": "project",
  "replace": {
    "rudloff/mediawiki-composer": "~0.1.3"
  },
  "require": {
    "php": ">=7.4",
    "archi-strasbourg/archi-blog": "dev-master",
    "archi-strasbourg/archi-comments": "dev-master",
    "archi-strasbourg/archi-footer": "~1.0.0",
    "archi-strasbourg/archi-home": "dev-master as 1.0.x-dev",
    "archi-strasbourg/archi-maps": "dev-master",
    "archi-strasbourg/archi-move": "~1.0.0",
    "archi-strasbourg/archi-news-tab": "dev-master",
    "archi-strasbourg/archi-wiki-skin": "dev-master",
    "archi-strasbourg/category-breadcrumb": "dev-master",
    "archi-strasbourg/email-login": "~1.0.0",
    "archi-strasbourg/emailuser-html": "~1.0.0",
    "archi-strasbourg/language-code": "~1.0.0",
    "archi-strasbourg/link-to-archive": "~1.0.0",
    "archi-strasbourg/paypal": "~1.0.0",
    "archi-strasbourg/sections-count": "dev-master as 1.0.x-dev",
    "cweagans/composer-patches": "^1.6",
    "mediawiki/arrays": "~1.35.0",
    "mediawiki/blockandnuke": "~1.35.0",
    "mediawiki/cirrussearch": "~1.35.0",
    "mediawiki/cite": "~1.35.0",
    "mediawiki/cleanchanges": "~1.35.0",
    "mediawiki/comments": "~1.35.0",
    "mediawiki/commonsmetadata": "~1.35.0",
    "mediawiki/confirmedit": "~1.35.0",
    "mediawiki/contactpage": "~1.35.0",
    "mediawiki/contributionscores": "~1.35.0",
    "mediawiki/core": "~1.35.0",
    "mediawiki/dismissablesitenotice": "~1.35.0",
    "mediawiki/dynamicpagelist": "~1.35.0",
    "mediawiki/echo": "~1.35.0",
    "mediawiki/elastica": "~1.35.0",
    "mediawiki/geodata": "~1.35.0",
    "mediawiki/googlecustomwikisearch": "~1.35.0",
    "mediawiki/lookupuser": "~1.35.0",
    "mediawiki/loops": "~1.35.0",
    "mediawiki/maps": "^8.0",
    "mediawiki/metadescriptiontag": "~0.4.0",
    "mediawiki/mixednamespacesearchsuggestions": "~1.35.0",
    "mediawiki/mobilefrontend": "~1.35.0",
    "mediawiki/multimediaviewer": "~1.35.0",
    "mediawiki/newsletter": "~1.35.0",
    "mediawiki/nuke": "~1.35.0",
    "mediawiki/nukedpl": "~1.35.0",
    "mediawiki/page-forms": "^5.2",
    "mediawiki/pageimages": "~1.35.0",
    "mediawiki/parserfunctions": "~1.35.0",
    "mediawiki/replacetext": "~1.35.0",
    "mediawiki/semantic-forms-select": "^3.0",
    "mediawiki/semantic-media-wiki": "^3.2",
    "mediawiki/templatedata": "~1.35.0",
    "mediawiki/textextracts": "~1.35.0",
    "mediawiki/translate": "^2021.04",
    "mediawiki/universal-language-selector": "^2021.04",
    "mediawiki/uploadwizard": "~1.35.0",
    "mediawiki/usermerge": "~1.35.0",
    "mediawiki/variables": "~1.35.0",
    "mediawiki/vector": "~1.35.0",
    "mediawiki/visualeditor": "~1.35.0",
    "shakeepers/hide-namespace": "~1.4.3"
  },
  "require-dev": {
    "insite/composer-dangling-locked-deps": "^0.2.1"
  },
  "minimum-stability": "dev",
  "prefer-stable": true,
  "repositories": [
    {
      "type": "composer",
      "url": "https://mwpackagist.netlib.re/"
    },
    {
      "type": "package",
      "package": {
        "name": "mediawiki/MetaDescriptionTag",
        "version": "0.4.0",
        "type": "mediawiki-extension",
        "source": {
          "url": "https://github.com/kolzchut/mediawiki-extensions-MetaDescriptionTag.git",
          "type": "git",
          "reference": "0.4.0"
        }
      }
    }
  ],
  "scripts": {
    "post-install-cmd": [
      "rm -r core/vendor",
      "ln -sfn ../vendor/ core/vendor",
      "rm -r core/skins",
      "ln -sfn ../skins/ core/skins",
      "rm -r core/extensions",
      "ln -sfn ../extensions/ core/extensions",
      "ln -sfn ../composer.lock core/composer.lock",
      "cd skins/archi-wiki/ && npm ci && npm run deploy"
    ],
    "updatedb": [
      "Composer\\Config::disableProcessTimeout",
      "@php core/maintenance/update.php --conf LocalSettings.php"
    ]
  },
  "config": {
    "sort-packages": true,
    "platform": {
      "php": "7.4.16"
    }
  },
  "extra": {
    "patches": {
      "mediawiki/blockandnuke": {
        "Pas de merge": "patches/blockandnuke-3.diff",
        "Masquer les utilisateurs bloqués": "patches/blockandnuke-4.diff"
      },
      "mediawiki/contactpage": {
        "En-tête From fixe": "patches/contactpage-1.diff"
      },
      "mediawiki/maps": {
        "Cache du geocoder dans la BDD": "https://patch-diff.githubusercontent.com/raw/ProfessionalWiki/Maps/pull/645.diff"
      },
      "mediawiki/semantic-media-wiki": {
        "Échappement des virgules dans les CSV": "patches/semantic-media-wiki-4976.diff"
      }
    }
  }
}
